# Decentralized Peer-to-Peer Chat Application

## Abstract

In an era where privacy and data ownership are paramount, decentralized communication platforms offer a solution to regain control and security over personal communications. This white paper introduces a peer-to-peer (P2P) chat application that leverages blockchain technology, specifically the Cardano blockchain, to enable secure and private communication without reliance on centralized servers or intermediaries. Users connect directly by establishing self-hosted communication channels with cryptographic security and full data control. The application is designed to facilitate secure one-on-one chats that function like real-time calls, ensuring scalability and trust without introducing middlemen.

## Introduction

Modern communication platforms often compromise user privacy, exposing data to breaches, surveillance, and exploitation by corporations. The need for decentralized communication solutions is pressing, where users maintain control over their personal data, connections, and messaging without sacrificing convenience or security.

The decentralized P2P chat application proposed in this paper aims to provide a secure, transparent, and user-friendly communication platform. Built on the Cardano blockchain for proof of intent and utilizing WebRTC for real-time messaging, the platform ensures that all conversations are private, encrypted, and free from the vulnerabilities associated with centralized intermediaries.

## System Architecture

The system architecture is designed with simplicity, security, and user empowerment at its core. It eliminates the need for centralized servers by enabling direct communication between users through self-hosted channels. Below, we detail the key components and their interplay in creating a secure communication platform.

### 1. Components

#### User Authentication

Users authenticate by connecting their Cardano wallets, serving as a verifiable identity mechanism. Each user possesses a unique wallet address and can cryptographically sign messages to prove ownership. It is recommended that users create a new, dedicated wallet specifically for this application to ensure separation of communication activity from other blockchain interactions.

#### Connection Initiation Process

To establish a connection:

1. **User A** expresses the desire to connect with **User B**.
2. **User B** provides **User A** with:
   - A **6-digit PIN**, valid for **10 minutes**.
   - Their **username**.
3. **User A** initiates a connection request by:
   - Making a **self-transaction** on the Cardano blockchain within the 10-minute window as a **proof of intent**.
   - The transaction contains **no metadata** about **User B**, the **PIN**, or the **username**.
   - **User A's app** then sends a **direct connection request** to **User B's app** using the **PIN** and **username** for authentication.
4. **User B's App Validates the Connection Request**:
   - **User B's app** receives the connection request directly from **User A's app**.
   - It uses the internally stored **PIN** and **username** to authenticate the request.
   - There is **no need** for **User B's app** to monitor the blockchain.
5. **Establishing the Connection**:
   - Upon successful validation, a secure connection is established.
   - Encryption keys are exchanged securely under the hood.
   - Users can now communicate in real-time.

#### Secure Communication Establishment

- **Key Exchange**: RSA key pairs are generated by both users. AES keys for encrypting messages are securely exchanged using these RSA keys.
- **Automated Secure Link Generation**: For each chat session (message call), the app automatically generates a new secure link under the hood, without user intervention.
- **No Manual Link Sharing**: Users do not manually exchange secure links; the app handles this process internally.

#### Real-Time Messaging

- **WebRTC Data Channels**: Used for direct, low-latency communication between users.
- **Encryption**: All messages are encrypted using AES encryption, ensuring end-to-end security.
- **Call-Like Functionality**: The chat functions like a phone call:
  - Both users must be online simultaneously to communicate.
  - Either user can end the chat session at any time.
  - When one user ends the session, it terminates for both parties.

#### Connection Persistence

- **No Additional Transactions Required**: After the initial connection is established, users can initiate message calls to each other without needing further blockchain transactions.
- **Session Management**: The app handles session initiation and termination internally, providing a seamless user experience.

### 2. Self-Hosted Communication Channels

- **User-Controlled Applications**: Each user runs their own instance of the application, which manages the communication channels.
- **No Central Servers**: Eliminates reliance on centralized infrastructure, reducing vulnerabilities and enhancing privacy.
- **Automatic Connection Handling**: The app automates the setup and teardown of connections, requiring minimal technical expertise from users.

### 3. Proof of Intent via Blockchain

The Cardano blockchain serves as a decentralized ledger to record proof of intent to establish connections.

- **User A's Transaction**:
  - Acts as a timestamped proof that **User A** intends to connect with **User B**.
  - Contains **no sensitive data** or metadata about the connection.
- **No Need for Blockchain Monitoring**:
  - **User B's app** does not monitor the blockchain.
  - The transaction is a prerequisite that allows **User A's app** to proceed with sending the connection request.
- **Immutable Records**:
  - The blockchain provides an immutable record of the proof of intent, enhancing security and trust.

## User Experience

### Flow of User Interaction

1. **Setup**:
   - Users download the app and connect their Cardano wallets.
   - Recommended to create a dedicated wallet for the app.
2. **Initiating a Connection**:
   - **User A** requests to connect with **User B**.
   - **User B** provides a **6-digit PIN** and their **username** to **User A**.
3. **Sending Connection Request**:
   - **User A** performs a self-transaction on the Cardano blockchain within 10 minutes as proof of intent.
   - **User A's app** then sends a direct connection request to **User B's app** using the **PIN** and **username**.
   - The transaction is not involved in the connection request process.
4. **Accepting the Connection**:
   - **User B's app** receives the connection request and validates it using the stored **PIN** and **username**.
   - **User B** accepts the connection within the app.
   - No additional transaction is required from **User B**.
5. **Real-Time Messaging**:
   - Once connected, either user can initiate a message call at any time without additional transactions.
   - The app automatically handles secure link generation and key exchange for each session.
   - Users must be online simultaneously to communicate.
6. **Ending a Chat Session**:
   - Either user can end the chat session at any time.
   - When one user ends the session, it terminates for both.
7. **Terminating the Connection**:
   - To permanently sever the connection, a user can perform another self-transaction.
   - Re-establishing the connection would require repeating the initial connection process.

### Key Features

- **No Blockchain Monitoring**: Simplifies the app and reduces resource consumption.
- **No Offline Messaging**: Both users must be online for communication, similar to a phone call.
- **User Control**: Users have full control over initiating and terminating connections and sessions.
- **Privacy and Security**: All communications are encrypted, and sensitive data is never exposed on the blockchain.

## Security Model

### 1. Proof of Intent Without Data Exposure

- **Transactions as Proof**: The act of making a transaction serves as proof of intent without containing any sensitive data.
- **User Privacy**: No personal information is included in the transaction, ensuring confidentiality.

### 2. End-to-End Encryption

- **RSA and AES Encryption**: Combines asymmetric and symmetric encryption for secure key exchange and message encryption.
- **Session-Based Keys**: Each chat session uses new encryption keys, enhancing security through forward secrecy.

### 3. Direct Connection Requests

- **No Blockchain Dependency**: Connection requests are sent directly between users' apps, reducing latency and complexity.
- **Secure Authentication**: The 6-digit PIN and username are used internally to authenticate connection requests.

### 4. Protection Against Unauthorized Access

- **6-Digit PIN and Username**: Acts as a shared secret to validate connection requests.
- **Time-Limited PIN**: The 10-minute validity reduces the risk of unauthorized use.

## Use Cases

### Private Personal Communication

- **Privacy-Conscious Individuals**: Ideal for users who value privacy and wish to avoid surveillance and data mining.

### Secure Business Communication

- **Confidential Discussions**: Suitable for businesses needing secure channels for sensitive communications without risking data exposure.

### Decentralized Communities

- **Blockchain and Crypto Enthusiasts**: Provides a platform aligned with decentralized principles, fostering trustless communication.

## Scalability and Future Work

While the application currently focuses on secure one-on-one communication, future developments may include:

- **Group Chats**: Implementing multi-user chat functionality while maintaining security and decentralization.
- **Offline Messaging**: Exploring secure methods for storing and forwarding messages when users are offline.
- **Cross-Chain Compatibility**: Extending support to other blockchain platforms.
- **Mobile Application**: Enhancing usability on mobile devices with optimized interfaces and push notifications.

## Conclusion

The decentralized P2P chat application offers a secure, privacy-focused communication platform that empowers users with control over their connections and data. By leveraging blockchain technology for proof of intent and self-hosted communication channels for direct messaging, it ensures that conversations are private, encrypted, and free from centralized vulnerabilities. The application strikes a balance between security and usability, providing an experience akin to traditional messaging apps while upholding the principles of decentralization and user sovereignty.


